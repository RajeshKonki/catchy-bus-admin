<!-- Page Header -->
<div class="page-header">
    <h1>Route Map</h1>
    <a routerLink="/routes" class="btn btn-ghost">
        <i class="fas fa-arrow-left"></i> Back to Routes
    </a>
</div>

<!-- Loading State -->
<div *ngIf="loading" class="loading-state">
    <i class="fas fa-spinner fa-spin"></i>
    Loading route...
</div>

<!-- Error State -->
<div *ngIf="error" class="error-state">
    <i class="fas fa-exclamation-circle"></i>
    {{ error }}
</div>

<!-- Map Card -->
<div *ngIf="!loading && !error" class="map-card">
    <div class="map-card-header">
        <h3>
            <i class="fas fa-route" style="color:var(--deep-blue);margin-right:0.5rem;"></i>
            {{ route?.name }}
        </h3>
        <div style="display:flex;align-items:center;gap:0.75rem;">
            <span style="font-size:0.82rem;color:var(--text-secondary);">
                <i class="fas fa-map-pin"></i> {{ route?.startPoint }} â†’ {{ route?.endPoint }}
            </span>
            <span class="status-badge" [ngClass]="route?.status?.toLowerCase() || 'active'">
                {{ route?.status || 'Active' }}
            </span>
        </div>
    </div>

    <!-- Leaflet Map Container -->
    <div id="route-map" class="map-container"></div>

    <!-- Stops Panel -->
    <div class="stops-panel" *ngIf="route?.stops?.length">
        <div class="stops-title">
            <i class="fas fa-list-ol" style="margin-right:0.4rem;color:var(--deep-blue);"></i>
            Route Stops ({{ route.stops.length }})
        </div>
        <div *ngFor="let stop of route.stops; let i = index" class="stop-item">
            <div class="stop-number">{{ i + 1 }}</div>
            <div>
                <div class="stop-name">{{ stop.name || stop }}</div>
                <div *ngIf="stop.address" style="font-size:0.78rem;color:var(--text-muted);">{{ stop.address }}</div>
            </div>
        </div>
    </div>
</div>