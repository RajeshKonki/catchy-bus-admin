<!-- Page Header -->
<div class="page-header">
    <h1>Routes</h1>
    <input type="text" placeholder="Search routes by name, start, end point..." (input)="onSearch($event)"
        class="search-input">
    <div class="actions">
        <a routerLink="/routes/new" class="btn btn-primary">
            <i class="fas fa-plus"></i> Add Route
        </a>
    </div>
</div>

<!-- Loading State -->
<div *ngIf="loading" class="loading-state">
    <i class="fas fa-spinner fa-spin"></i>
    Loading routes...
</div>

<!-- Error State -->
<div *ngIf="error" class="error-state">
    <i class="fas fa-exclamation-circle"></i>
    {{ error }}
</div>

<!-- Route Cards Grid -->
<!-- Route List Table -->
<div *ngIf="!loading && !error && filteredRoutes.length > 0" class="table-container">
    <table class="data-table">
        <thead>
            <tr>
                <th>Route Name</th>
                <th>Status</th>
                <th>Start Point</th>
                <th>End Point</th>
                <th>Stops</th>
                <th>Distance</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let route of paginatedRoutes">
                <td>
                    <strong>{{ route.name }}</strong>
                </td>
                <td>
                    <span class="status-badge" [ngClass]="route.status?.toLowerCase() || 'active'">
                        {{ route.status || 'Active' }}
                    </span>
                </td>
                <td>{{ route.startPoint }}</td>
                <td>{{ route.endPoint }}</td>
                <td>
                    <div class="route-stops-preview" *ngIf="route.stops?.length">
                        <ng-container *ngFor="let stop of route.stops; let i = index; let last = last">
                            <span class="stop-chip" *ngIf="i < 3">
                                {{ stop.name || stop }}
                            </span>
                            <span class="stop-arrow" *ngIf="i < 2 && !last">â€º</span>
                        </ng-container>
                        <span class="stop-chip extra" *ngIf="route.stops.length > 3">
                            +{{ route.stops.length - 3 }}
                        </span>
                    </div>
                    <span *ngIf="!route.stops?.length" class="text-muted">No stops</span>
                </td>
                <td>{{ route.distance }} km</td>
                <td>
                    <div class="action-buttons">
                        <a [routerLink]="['/routes', route.id, 'map']" class="btn-icon" title="Map">
                            <i class="fas fa-map"></i>
                        </a>
                        <a [routerLink]="['/routes', route.id, 'edit']" class="btn-icon" title="Edit">
                            <i class="fas fa-edit"></i>
                        </a>
                        <button (click)="deleteRoute(route.id)" class="btn-icon text-red" title="Delete">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>

    <!-- Pagination Controls -->
    <div class="pagination-controls">
        <button (click)="changePage(currentPage - 1)" [disabled]="currentPage === 1" class="btn btn-secondary btn-sm">
            <i class="fas fa-chevron-left"></i> Previous
        </button>
        <span class="page-info">
            Page {{ currentPage }} of {{ totalPages }}
        </span>
        <button (click)="changePage(currentPage + 1)" [disabled]="currentPage === totalPages"
            class="btn btn-secondary btn-sm">
            Next <i class="fas fa-chevron-right"></i>
        </button>
    </div>
</div>

<!-- Empty State -->
<div *ngIf="!loading && !error && filteredRoutes.length === 0" class="empty-state">
    <i class="fas fa-route"></i>
    <strong>No routes found</strong>
    <span>Try adjusting your search or create a new route.</span>
</div>